<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>我们的爱情时光 ❤️</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="animations.css">
</head>
<body>
    <div class="background">
        <div class="hearts"></div>
    </div>

    <div class="container">
        <!-- 头部导航 -->
        <nav class="navbar">
            <div class="nav-brand">❤️ Our Love Story</div>
            <div class="nav-links">
                <a href="#home" data-target="home-section">首页</a>
                <a href="#timeline" data-target="timeline-section">时光轴</a>
                <a href="#gallery" data-target="gallery-section">相册</a>
                <a href="#message" data-target="message-section">留言</a>
            </div>
        </nav>

        <!-- 首页部分 -->
        <section id="home-section" class="section active">
            <div class="hero">
                <h1 class="love-title rainbow-text fade-in-up">❤️ 我们的爱情故事 ❤️</h1>
                <div class="couple-info fade-in-up delay-200">
                    <div class="person">
                        <div class="avatar glow-on-hover">👨‍💻</div>
                        <h3>小明</h3>
                    </div>
                    <div class="heart-center" style="animation: heartBeat 2s ease-in-out infinite;">💕</div>
                    <div class="person">
                        <div class="avatar glow-on-hover">👩‍🎨</div>
                        <h3>小红</h3>
                    </div>
                </div>
                <div class="love-counter glow-on-hover fade-in-up delay-400">
                    <h2>我们已经在一起</h2>
                    <div id="love-duration" class="duration"></div>
                </div>
            </div>
        </section>

        <!-- 时光轴部分 -->
        <section id="timeline-section" class="section">
            <h2>💖 重要时刻</h2>
            <div class="timeline">
                <div class="timeline-item">
                    <div class="timeline-date">2024-01-14</div>
                    <div class="timeline-content">
                        <h3>💕 第一次相遇</h3>
                        <p>在咖啡厅的那个午后，阳光正好，你也正好...</p>
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-date">2024-02-14</div>
                    <div class="timeline-content">
                        <h3>💝 确定关系</h3>
                        <p>情人节的告白，从此我们成为了彼此最重要的人</p>
                    </div>
                </div>
                <div class="timeline-item">
                    <div class="timeline-date">2024-06-01</div>
                    <div class="timeline-content">
                        <h3>🎂 第一次生日</h3>
                        <p>一起度过的第一个生日，许下了永远在一起的愿望</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- 相册部分 -->
        <section id="gallery-section" class="section">
            <h2>📸 甜蜜回忆</h2>
            <div class="gallery">
                <div class="photo-item photo-zoom glow-on-hover fade-in-up" onclick="openModal('photo1')">
                    <div class="photo-placeholder rotate-infinite">📷</div>
                    <p>第一次约会</p>
                </div>
                <div class="photo-item photo-zoom glow-on-hover fade-in-up delay-100" onclick="openModal('photo2')">
                    <div class="photo-placeholder">📷</div>
                    <p>一起旅行</p>
                </div>
                <div class="photo-item photo-zoom glow-on-hover fade-in-up delay-200" onclick="openModal('photo3')">
                    <div class="photo-placeholder">📷</div>
                    <p>日常生活</p>
                </div>
                <div class="photo-item photo-zoom glow-on-hover fade-in-up delay-300" onclick="openModal('photo4')">
                    <div class="photo-placeholder">📷</div>
                    <p>节日庆祝</p>
                </div>
            </div>
        </section>

        <!-- 留言部分 -->
        <section id="message-section" class="section">
            <h2>💌 爱的留言</h2>
            <div class="message-container">
                <div class="message-form">
                    <textarea id="messageText" placeholder="写下想对TA说的话..."></textarea>
                    <button onclick="addMessage()">💕 发送爱意</button>
                </div>
                <div class="messages" id="messagesList">
                    <div class="message">
                        <div class="message-content">每天和你在一起都是最幸福的时光 💕</div>
                        <div class="message-time">2024-09-01</div>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- 照片模态框 -->
    <div id="photoModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <div id="modalPhoto" class="modal-photo">📷</div>
            <p id="modalCaption"></p>
        </div>
    </div>

    <script src="script.js"></script>
    <script>
        // 检查访问权限 - 必须通过验证才能访问
        document.addEventListener('DOMContentLoaded', function() {
            // 检查是否通过今日验证
            const authData = JSON.parse(localStorage.getItem('love_auth_status') || 'null');
            
            if (!authData) {
                // 没有验证记录，跳转到验证页面
                window.location.href = 'auth.html';
                return;
            }
            
            const now = Math.floor(Date.now() / 1000);
            const authTime = authData.timestamp;
            const isValid = (now - authTime) < (24 * 60 * 60); // 24小时有效期
            
            // 检查是否是今天的验证
            const today = new Date().toDateString();
            const authDate = new Date(authTime * 1000).toDateString();
            const isSameDay = today === authDate;
            
            if (!isValid || !isSameDay) {
                // 验证已过期或不是今天的验证，重新验证
                localStorage.removeItem('love_auth_status');
                window.location.href = 'auth.html';
                return;
            }
            
            // 验证通过，显示欢迎消息
            setTimeout(() => {
                showWelcomeMessage();
            }, 1000);
        });
        
        // 显示欢迎消息
        function showWelcomeMessage() {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 100px;
                right: 30px;
                background: linear-gradient(45deg, #667eea, #764ba2);
                color: white;
                padding: 15px 25px;
                border-radius: 15px;
                font-weight: 500;
                z-index: 3000;
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
                transform: translateX(400px);
                transition: transform 0.5s ease;
                font-family: inherit;
            `;
            notification.innerHTML = '💕 欢迎回到我们的爱情世界！';
            
            document.body.appendChild(notification);
            
            // 滑入动画
            setTimeout(() => {
                notification.style.transform = 'translateX(0)';
            }, 100);
            
            // 3秒后消失
            setTimeout(() => {
                notification.style.transform = 'translateX(400px)';
                setTimeout(() => {
                    if (notification.parentNode) {
                        document.body.removeChild(notification);
                    }
                }, 500);
            }, 3000);
        }
    </script>
</body>
</html>
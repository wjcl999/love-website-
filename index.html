<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æˆ‘ä»¬çš„çˆ±æƒ…æ—¶å…‰ â¤ï¸</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="animations.css">
</head>
<body>
    <div class="background">
        <div class="hearts"></div>
    </div>

    <div class="container">
        <!-- å¤´éƒ¨å¯¼èˆª -->
        <nav class="navbar">
            <div class="nav-brand">â¤ï¸ Our Love Story</div>
            <div class="nav-links">
                <a href="#home" data-target="home-section">é¦–é¡µ</a>
                <a href="#timeline" data-target="timeline-section">æ—¶å…‰è½´</a>
                <a href="#gallery" data-target="gallery-section">ç›¸å†Œ</a>
                <a href="#message" data-target="message-section">ç•™è¨€</a>
            </div>
        </nav>

        <!-- é¦–é¡µéƒ¨åˆ† -->
        <section id="home-section" class="section active">
            <div class="hero">
                <h1 class="love-title rainbow-text fade-in-up">â¤ï¸ æˆ‘ä»¬çš„çˆ±æƒ…æ•…äº‹ â¤ï¸</h1>
                <div class="couple-info fade-in-up delay-200">
                    <div class="person">
                        <div class="avatar glow-on-hover">ğŸ‘¨â€ğŸ’»</div>
                        <h3>å°æ˜</h3>
                    </div>
                    <div class="heart-center" style="animation: heartBeat 2s ease-in-out infinite;">ğŸ’•</div>
                    <div class="person">
                        <div class="avatar glow-on-hover">ğŸ‘©â€ğŸ¨</div>
                        <h3>å°çº¢</h3>
                    </div>
                </div>
                <div class="love-counter glow-on-hover fade-in-up delay-400">
                    <h2>æˆ‘ä»¬å·²ç»åœ¨ä¸€èµ·</h2>
                    <div id="love-duration" class="duration"></div>
                </div>
            </div>
        </section>

        <!-- æ—¶å…‰è½´éƒ¨åˆ† -->
        <section id="timeline-section" class="section">
            <h2>ğŸ’– é‡è¦æ—¶åˆ»</h2>
            <div class="timeline" id="timelineContainer">
                <!-- æ—¶å…‰è½´é¡¹ç›®å°†é€šè¿‡JavaScriptåŠ¨æ€åŠ è½½ -->
                <div class="timeline-placeholder">
                    <div class="timeline-placeholder-icon">â°</div>
                    <p>è¿˜æ²¡æœ‰æ—¶å…‰è½´è®°å½•ï¼Œå¿«å»ç®¡ç†åå°æ·»åŠ å§~</p>
                </div>
            </div>
        </section>

        <!-- ç›¸å†Œéƒ¨åˆ† -->
        <section id="gallery-section" class="section">
            <h2>ğŸ“¸ ç”œèœœå›å¿†</h2>
            
            <!-- ç›¸å†Œåˆ†ç±»å¯¼èˆª -->
            <div class="gallery-tabs">
                <button class="tab-btn active" data-category="all" onclick="showGalleryCategory('all')">å…¨éƒ¨</button>
                <button class="tab-btn" data-category="first_date" onclick="showGalleryCategory('first_date')">ç¬¬ä¸€æ¬¡çº¦ä¼š</button>
                <button class="tab-btn" data-category="travel" onclick="showGalleryCategory('travel')">ä¸€èµ·æ—…è¡Œ</button>
                <button class="tab-btn" data-category="daily_life" onclick="showGalleryCategory('daily_life')">æ—¥å¸¸ç”Ÿæ´»</button>
                <button class="tab-btn" data-category="festivals" onclick="showGalleryCategory('festivals')">èŠ‚æ—¥åº†ç¥</button>
            </div>
            
            <div class="gallery" id="photoGallery">
                <!-- ç…§ç‰‡å°†é€šè¿‡JavaScriptåŠ¨æ€åŠ è½½ -->
                <div class="photo-placeholder-hint">
                    <div class="photo-placeholder">ğŸ“·</div>
                    <p>è¿˜æ²¡æœ‰ç…§ç‰‡ï¼Œå¿«å»ç®¡ç†åå°ä¸Šä¼ å§~</p>
                </div>
            </div>
        </section>

        <!-- ç•™è¨€éƒ¨åˆ† -->
        <section id="message-section" class="section">
            <h2>ğŸ’Œ çˆ±çš„ç•™è¨€</h2>
            <div class="message-container">
                <div class="message-form">
                    <textarea id="messageText" placeholder="å†™ä¸‹æƒ³å¯¹TAè¯´çš„è¯..."></textarea>
                    <button onclick="addMessage()">ğŸ’• å‘é€çˆ±æ„</button>
                </div>
                <div class="messages" id="messagesList">
                    <div class="message">
                        <div class="message-content">æ¯å¤©å’Œä½ åœ¨ä¸€èµ·éƒ½æ˜¯æœ€å¹¸ç¦çš„æ—¶å…‰ ğŸ’•</div>
                        <div class="message-time">2024-09-01</div>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- ç…§ç‰‡æ¨¡æ€æ¡† -->
    <div id="photoModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <div id="modalPhoto" class="modal-photo">ğŸ“·</div>
            <p id="modalCaption"></p>
        </div>
    </div>

    <script src="script.js"></script>
    <script>
        // æ£€æŸ¥è®¿é—®æƒé™ - å¿…é¡»é€šè¿‡éªŒè¯æ‰èƒ½è®¿é—®
        document.addEventListener('DOMContentLoaded', function() {
            // æ£€æŸ¥æ˜¯å¦é€šè¿‡ä»Šæ—¥éªŒè¯
            const authData = JSON.parse(localStorage.getItem('love_auth_status') || 'null');
            
            if (!authData) {
                // æ²¡æœ‰éªŒè¯è®°å½•ï¼Œè·³è½¬åˆ°éªŒè¯é¡µé¢
                window.location.href = 'auth.html';
                return;
            }
            
            const now = Math.floor(Date.now() / 1000);
            const authTime = authData.timestamp;
            const isValid = (now - authTime) < (24 * 60 * 60); // 24å°æ—¶æœ‰æ•ˆæœŸ
            
            // æ£€æŸ¥æ˜¯å¦æ˜¯ä»Šå¤©çš„éªŒè¯
            const today = new Date().toDateString();
            const authDate = new Date(authTime * 1000).toDateString();
            const isSameDay = today === authDate;
            
            if (!isValid || !isSameDay) {
                // éªŒè¯å·²è¿‡æœŸæˆ–ä¸æ˜¯ä»Šå¤©çš„éªŒè¯ï¼Œé‡æ–°éªŒè¯
                localStorage.removeItem('love_auth_status');
                window.location.href = 'auth.html';
                return;
            }
            
            // éªŒè¯é€šè¿‡ï¼Œæ˜¾ç¤ºæ¬¢è¿æ¶ˆæ¯
            setTimeout(() => {
                showWelcomeMessage();
            }, 1000);
        });
        
        // æ˜¾ç¤ºæ¬¢è¿æ¶ˆæ¯
        function showWelcomeMessage() {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 100px;
                right: 30px;
                background: linear-gradient(45deg, #667eea, #764ba2);
                color: white;
                padding: 15px 25px;
                border-radius: 15px;
                font-weight: 500;
                z-index: 3000;
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
                transform: translateX(400px);
                transition: transform 0.5s ease;
                font-family: inherit;
            `;
            notification.innerHTML = 'ğŸ’• æ¬¢è¿å›åˆ°æˆ‘ä»¬çš„çˆ±æƒ…ä¸–ç•Œï¼';
            
            document.body.appendChild(notification);
            
            // æ»‘å…¥åŠ¨ç”»
            setTimeout(() => {
                notification.style.transform = 'translateX(0)';
            }, 100);
            
            // 3ç§’åæ¶ˆå¤±
            setTimeout(() => {
                notification.style.transform = 'translateX(400px)';
                setTimeout(() => {
                    if (notification.parentNode) {
                        document.body.removeChild(notification);
                    }
                }, 500);
            }, 3000);
        }
    </script>
</body>
</html>
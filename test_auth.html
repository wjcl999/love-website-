<!DOCTYPE html>
<html>
<head>
    <title>Auth Test</title>
</head>
<body>
    <h1>Authentication Test</h1>
    <button onclick="testBackdoor()">Test 666 Backdoor</button>
    <button onclick="testAdminAuth()">Test Admin Auth</button>
    <button onclick="clearStorage()">Clear Storage</button>
    
    <div id="results"></div>

    <script>
        function log(message) {
            document.getElementById('results').innerHTML += '<p>' + message + '</p>';
            console.log(message);
        }

        function testBackdoor() {
            // Simulate the 666 backdoor logic
            const sessionData = {
                timestamp: Math.floor(Date.now() / 1000),
                role: 'admin'
            };
            
            try {
                localStorage.setItem('love_admin_session', JSON.stringify(sessionData));
                log('‚úÖ Session set successfully: ' + JSON.stringify(sessionData));
            } catch (error) {
                log('‚ùå Failed to set session: ' + error.message);
            }
        }

        function testAdminAuth() {
            // Simulate admin.js auth check
            const adminSession = JSON.parse(localStorage.getItem('love_admin_session') || 'null');
            
            if (!adminSession) {
                log('‚ùå No admin session found');
                return;
            }
            
            const now = Math.floor(Date.now() / 1000);
            const sessionTime = adminSession.timestamp;
            const isValid = (now - sessionTime) < (30 * 60); // 30ÂàÜÈíüÊúâÊïàÊúü
            
            log('üìä Current time: ' + now);
            log('üìä Session time: ' + sessionTime);
            log('üìä Time diff: ' + (now - sessionTime) + ' seconds');
            log('üìä Is valid: ' + isValid);
            log('üìä Role: ' + adminSession.role);
            
            if (!isValid) {
                log('‚ùå Admin session expired');
                localStorage.removeItem('love_admin_session');
                return;
            }
            
            if (adminSession.role === 'admin') {
                log('‚úÖ Admin auth successful');
            } else {
                log('‚ùå Invalid role');
            }
        }

        function clearStorage() {
            localStorage.removeItem('love_admin_session');
            log('üóëÔ∏è Storage cleared');
        }
    </script>
</body>
</html>